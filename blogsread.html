<!DOCTYPE html>
<html class="dark" lang="en"><head>
<meta charset="utf-8"/>
<meta content="width=device-width, initial-scale=1.0" name="viewport"/>
<title>Stories of Attar Store</title>
<script src="https://cdn.tailwindcss.com?plugins=forms,container-queries"></script>
<link href="https://fonts.googleapis.com" rel="preconnect"/>
<link crossorigin="" href="https://fonts.gstatic.com" rel="preconnect"/>
<link href="https://fonts.googleapis.com/css2?family=Playfair+Display:ital,wght@0,400;0,500;0,600;0,700;1,400;1,700&amp;family=Manrope:wght@200;300;400;500;600;700&amp;display=swap" rel="stylesheet"/>
<link href="https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined:wght,FILL@100..700,0..1&amp;display=swap" rel="stylesheet"/>
<script id="tailwind-config">
        tailwind.config = {
          darkMode: "class",
          theme: {
            extend: {
              colors: {
                "primary": "#D4AF37", // Pure Gold
                "secondary": "#050B14", // Obsidian / Deep Navy
                "accent": "#F5F1E9", // Soft Beige
                "dark-surface": "#0D1B2A",
              },
              fontFamily: {
                "display": ["Playfair Display", "serif"],
                "body": ["Manrope", "sans-serif"],
              },
              boxShadow: {
                'glow-gold': '0 0 30px -5px rgba(212, 175, 55, 0.3)',
                'inner-gold': 'inset 0 0 10px rgba(212, 175, 55, 0.2)',
              }
            },
          },
        }
    </script>
<style type="text/tailwindcss">
        @layer components {
            .article-content h2 {
                @apply font-display text-3xl md:text-4xl text-primary mt-16 mb-6 leading-tight;
            }
            .article-content h3 {
                @apply font-display text-2xl md:text-3xl text-primary/90 mt-12 mb-4 leading-tight;
            }
            .article-content p {
                @apply mb-8 text-lg md:text-xl text-white/80 leading-[1.8] font-light;
            }
            .article-content blockquote {
                @apply my-12 pl-8 border-l-2 border-primary italic font-display text-2xl md:text-3xl text-white/90 leading-relaxed;
            }
            .article-content figure {
                @apply my-16;
            }
            .article-content figcaption {
                @apply text-center mt-4 text-primary/60 text-sm tracking-widest uppercase italic;
            }
            .article-content img {
                @apply w-full h-auto rounded-2xl shadow-2xl border border-white/5;
            }
            .tag-pill {
                @apply px-5 py-2 border border-primary/30 text-primary/80 text-[10px] font-bold uppercase tracking-[0.2em] rounded-full hover:bg-primary hover:text-secondary transition-all duration-300;
            }
            .progress-bar {
                @apply fixed top-0 left-0 h-[2px] bg-primary z-[100] transition-all duration-100 ease-out;
            }
            .fill-btn {
                @apply relative overflow-hidden transition-all duration-500 border border-primary text-primary px-8 py-3 uppercase tracking-[0.2em] text-xs font-bold bg-transparent;
            }
            .fill-btn:hover {
                @apply text-secondary bg-primary;
            }
        }
    </style>
    <script src="/assets/js/font.js"></script>
</head>
<body class="bg-secondary font-body text-white">

    <!-- BACK BUTTON -->
    <button
      onclick="history.back()"
      class="fixed top-6 left-6 z-50 flex items-center gap-2
             px-4 py-2 rounded-full
             bg-white/5 hover:bg-white/10
             border border-primary/30
             text-primary text-xs font-bold uppercase tracking-widest">
      <span class="material-symbols-outlined text-sm">arrow_back</span>
      Back
    </button>
    
    <main class="pt-28 pb-32">
      <article class="container mx-auto px-4">
    
        <!-- META -->
        <div class="max-w-[800px] mx-auto text-center mb-14">
          <div
            id="blog-meta"
            class="flex items-center justify-center gap-4
                   text-[10px] font-bold tracking-[0.3em]
                   text-primary/80 uppercase mb-6">
          </div>
    
          <h1
            id="blog-title"
            class="text-4xl md:text-6xl lg:text-7xl
                   font-display font-bold
                   leading-[1.1] tracking-tight">
          </h1>
        </div>
    
        <!-- MAIN IMAGE -->
        <div
          id="blog-main-image"
          class="max-w-[1100px] mx-auto mb-20 hidden">
        </div>
    
        <!-- CONTENT -->
        <div
          id="blog-content"
          class="max-w-[800px] mx-auto article-content">
        </div>
    
        <!-- TAGS -->
        <div
          id="blog-tags"
          class="max-w-[800px] mx-auto mt-20 pt-10
                 border-t border-white/10 hidden">
        </div>
    
      </article>
    </main>
    
    <script>
    const API_BASE = "https://perfume-store-production.up.railway.app/api/blogs";
    
    function getSlug() {
      return new URLSearchParams(window.location.search).get("slug");
    }
    
    async function loadBlog() {
      const slug = getSlug();
    
      if (!slug) {
        document.getElementById("blog-content").innerHTML =
          "<p class='text-center text-white/60'>Invalid blog link.</p>";
        return;
      }
    
      const res = await fetch(`${API_BASE}/slug/${slug}`);
    
      if (!res.ok) {
        document.getElementById("blog-content").innerHTML =
          "<p class='text-center text-white/60'>Blog not found.</p>";
        return;
      }
    
      const { blog } = await res.json();
    
      // META (READ TIME + DATE)
      document.getElementById("blog-meta").innerHTML = `
        ${blog.readingTime ? `<span>${blog.readingTime} MIN READ</span>` : ""}
        <span class="w-1.5 h-1.5 rounded-full bg-primary/40"></span>
        <span>${new Date(blog.createdAt).toLocaleDateString()}</span>
      `;
    
      // TITLE
      document.getElementById("blog-title").textContent = blog.title;
    
      // MAIN IMAGE
      if (blog.mainImage) {
        const imgBox = document.getElementById("blog-main-image");
        imgBox.innerHTML = `
          <img
            src="https://perfume-store-production.up.railway.app/${blog.mainImage}"
            class="w-full aspect-video object-cover rounded-2xl
                   shadow-glow-gold border border-white/10"
          />
        `;
        imgBox.classList.remove("hidden");
      }
    
      // CONTENT (EDITOR HTML â€” ORDER PRESERVED)
      document.getElementById("blog-content").innerHTML = blog.content;
    
      // TAGS (BOTTOM ONLY)
      if (blog.tags?.length) {
        const tagBox = document.getElementById("blog-tags");
        tagBox.innerHTML = `
          <div class="flex flex-wrap gap-3">
            ${blog.tags.map(t => `<span class="tag-pill">${t}</span>`).join("")}
          </div>
        `;
        tagBox.classList.remove("hidden");
      }
    }
    
    loadBlog();
    </script>
    
    </body>
    </html>